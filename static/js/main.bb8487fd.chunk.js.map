{"version":3,"sources":["util/translations.js","hooks/useTranslation.js","util/hasIncompleteSets.js","util/timeFormat.js","ui.js","util/workoutPersistence.js","hooks/usePersistence.js","util/serializeWorkout.js","components/Actions.js","util/hasIncompleteExercises.js","components/AddExercise.js","hooks/useNotification.js","hooks/useTimer.js","components/SetDisplay.js","components/RPEScale.js","components/Exercise.js","util/genHash.js","util/reducer.js","components/Workout.js","components/WorkoutHistory.js","components/AddWorkout.js","components/WorkoutDisplay.js","components/WorkoutList.js","App.js","index.js"],"names":["en","pt","useTranslation","useState","language","setLanguage","useEffect","navigatorLanguage","window","navigator","split","includes","fallback","translations","t","key","hasIncompleteSets","exercise","sets","some","s","stage","timeFormat","seconds","Math","abs","pad","val","padStart","minutes","floor","hours","Container","props","children","className","Footer","Button","Icon","type","label","buttonProps","colorClasses","primary","neutral","success","colorClass","DecoratedBlock","TextLabel","small","sizeClass","SingleInputForm","onSubmit","value","onChange","placeholder","required","Block","isActive","List","ListItem","itemProps","ring","TitleH3","onClick","EmptyMessage","LightButton","BlockActions","Database","this","db","a","alert","openDB","upgrade","objectStoreNames","contains","createObjectStore","keyPath","autoIncrement","storeName","data","transaction","store","objectStore","openCursor","cursor","persistenceKey","push","continue","get","operation","complete","logEntry","runInLogs","add","delete","workout","runInWorkouts","id","workoutId","getAllData","lastLogEntry","filter","entry","sort","b","date","getData","Date","isComplete","duration","exercises","put","createNew","loadNewWorkout","loadWorkoutFromLogs","usePersistence","setDb","database","init","then","getWorkout","activeSetId","activeExerciseId","name","document","querySelector","textContent","trim","Number","dataset","$exercises","querySelectorAll","$exercise","$sets","$set","set","defaultDurationTime","defaultReps","defaultWeight","defaultRestTime","rpe","locales","CycleButton","labels","IDLE","ACTIVE","RESTING","COMPLETE","icons","BiPlay","BiPause","BiCheck","BiRefresh","Actions","state","dispatch","isReadOnly","timer","setIsComplete","footerButtons","find","e","hasActiveSet","Boolean","hasExercises","length","hasSets","isRunning","BiStar","BiTrophy","confirm","saveLogEntry","pause","play","payload","exerciseId","setId","timerType","locale","formatOptions","data-value","format","AddExercise","setName","ev","preventDefault","target","useNotification","hasAskedPermission","setHasAskedPermission","hasNotificationPermission","setHasNotificationPermission","notify","requestNotificationPermission","Notification","requestPermission","permission","msg","body","vibrate","useTimer","timerId","initialTimer","increment","setTimer","setIsRunning","visibilityState","isBackground","setIsBackground","sessionStorage","interval","setInterval","max","clearInterval","onVisibilityChange","addEventListener","removeEventListener","setItem","now","lastTimer","getItem","ellapsed","SetInputField","inputProps","labelText","formatFunction","isEdit","onToggleEdit","inputColorClass","danger","highlight","autoFocus","onFocus","select","onBlur","tabIndex","SetDisplay","exerciseType","durationTimer","restTimer","notifiedDuration","setNotifiedDuration","notifiedRest","setNotifiedRest","reps","setReps","weight","setWeight","isEditTime","setIsEditTime","isEditReps","setIsEditReps","isEditWeight","setIsEditWeight","isEditRest","setIsEditRest","prevStageRef","useRef","current","isFinite","numericInputProps","pattern","min","inputMode","baseType","getTypeForTimer","baseStage","data-id","defaultValue","RPEScale","defaultRPE","setValue","expand","setExpand","rpeTitles","rpeDescriptions","step","Array","from","keys","map","i","Exercise","isFirst","isLast","defaultType","isWorkoutComplete","setType","onActivateSet","moveExercise","factor","typeIcons","cardio","data-type","disabled","newType","genHash","crypto","getRandomValues","Uint32Array","toString","reducer","action","cloneDeep","ex","hash","addNewSet","setIndex","findIndex","splice","removeSet","updateActiveSet","currentStage","nextStage","stages","index","getNextStageFor","nextIndex","updateSetStage","exerciseIndex","updateExerciseType","nextExerciseIdx","nextExercise","updateActiveExercise","addNewExercise","completeWorkout","newIndex","exerciseA","exerciseB","Error","Workout","useReducer","loadWorkoutLogById","to","uiWorkout","saveWorkoutTemplate","WorkoutHistory","workoutsList","setWorkoutsList","onClickRemove","logKey","eraseLogEntry","w","sortedList","sortBy","valueOf","pathname","search","AddWorkout","onAddWorkout","WorkoutDisplay","onRemoveWorkout","lastRun","setLastRun","getLastLogEntry","lastEntry","formatDistance","WorkoutList","workouts","setWorkouts","saveWorkout","concat","eraseWorkout","App","renderWorkout","routeProps","URLSearchParams","location","match","path","basename","process","exact","render","ReactDOM","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.bb8487fd.chunk.js","sourcesContent":["export const en = {\r\n    'no_exercise': 'No exercises to list.',\r\n    'start': 'Start',\r\n    'close': 'Close',\r\n    'complete': 'Complete',\r\n    'reset': 'Reset',\r\n    'sets': 'Sets',\r\n    'reps': 'Reps',\r\n    'history': 'History',\r\n    'view': 'View',\r\n    'last_run': 'Last run',\r\n    'time': 'Time',\r\n    'rest': 'Rest',\r\n    'weight': 'Weight',\r\n    'confirm_delete': 'Are you sure you want to delete this workout?',\r\n    'save_progress': 'Would you like to save your progress?',\r\n    'erase_workout': 'Are you sure you want to erase the current workout?',\r\n    'back': 'Back',\r\n    'reset_workout': 'Reset workout',\r\n    'finish_workout': 'Finish Workout',\r\n    'finish_exercise': 'Finish exercise',\r\n    'start_workout': 'Start workout',\r\n    'add_exercise': 'Add exercise',\r\n    'exercise_name': 'Exercise name',\r\n    'no_sets': 'No sets for this exercise.',\r\n    'remove_set': 'Remove set',\r\n    'add_set': 'Add set',\r\n    'rpe_title_1': 'Very light activity',\r\n    'rpe_title_2': 'Light activity',\r\n    'rpe_title_3': 'Light activity',\r\n    'rpe_title_4': 'Moderate activity',\r\n    'rpe_title_5': 'Moderate activity',\r\n    'rpe_title_6': 'Moderate activity',\r\n    'rpe_title_7': 'Vigorous activity',\r\n    'rpe_title_8': 'Vigorous activity',\r\n    'rpe_title_9': 'Very hard activity',\r\n    'rpe_title_10': 'Max effort activity',\r\n    'rpe_desc_1': 'Hardly any exertion, but more than sleeping, watching TV, etc.',\r\n    'rpe_desc_2': 'Could mantain for hours. Easy to breathe and carry a conversation.',\r\n    'rpe_desc_3': 'Could mantain for hours. Easy to breathe and carry a conversation.',\r\n    'rpe_desc_4': 'Breathing heavily, can mantain a conversation, but more challenging.',\r\n    'rpe_desc_5': 'Breathing heavily, can mantain a conversation, but more challenging.',\r\n    'rpe_desc_6': 'Breathing heavily, can mantain a conversation, but more challenging.',\r\n    'rpe_desc_7': 'Almost uncofortable, short of breath, can speak a sentence.',\r\n    'rpe_desc_8': 'Almost uncofortable, short of breath, can speak a sentence.',\r\n    'rpe_desc_9': 'Very difficult to mantain, can barely breathe, can speak a few words',\r\n    'rpe_desc_10': 'Almost impossible to keep going. Out of breath, unable to talk.',\r\n    'rpe': 'Rate of perceived exertion ',\r\n    'workouts_list': 'Workouts list',\r\n    'workout_name': 'Workout name',\r\n    'add_workout': 'Add workout',\r\n    'remove_workout': 'Remove workout',\r\n    'no_workout': 'No workout',\r\n    'load_error': 'Could not load data',\r\n    'times_up': 'Rest time\\'s up!',\r\n    'duration_up': 'Exercise time\\'s up!',\r\n    'persist_error': 'Could not save data'\r\n};\r\n\r\nexport const pt = {\r\n    'no_exercise': 'Nenhum exercício para listar.',\r\n    'start': 'Iniciar',\r\n    'close': 'Fechar',\r\n    'complete': 'Completar',\r\n    'reset': 'Reiniciar',\r\n    'sets': 'Séries',\r\n    'reps': 'Repet.',\r\n    'time': 'Tempo',\r\n    'history': 'Histórico',\r\n    'view': 'Ver',\r\n    'last_run': 'Última vez',\r\n    'rest': 'Descanso',\r\n    'weight': 'Peso',\r\n    'confirm_delete': 'Tem certeza que deseja remover este treino?',\r\n    'save_progress': 'Você gostaria de salvar seu progresso?',\r\n    'erase_workout': 'Tem certeza que deseja apagar o treino atual?',\r\n    'back': 'Voltar',\r\n    'reset_workout': 'Apagar treino',\r\n    'finish_workout': 'Concluir treino',\r\n    'finish_exercise': 'Concluir exercício',\r\n    'start_workout': 'Iniciar treino',\r\n    'add_exercise': 'Adicionar exercício',\r\n    'exercise_name': 'Nome do exercício',\r\n    'no_sets': 'Nenhuma série para este exercício.',\r\n    'remove_set': 'Remover série',\r\n    'add_set': 'Adicionar série',\r\n    'rpe_title_1': 'Atividade muito leve',\r\n    'rpe_title_2': 'Atividade leve',\r\n    'rpe_title_3': 'Atividade leve',\r\n    'rpe_title_4': 'Atividade moderada',\r\n    'rpe_title_5': 'Atividade moderada',\r\n    'rpe_title_6': 'Atividade moderada',\r\n    'rpe_title_7': 'Atividade vigorosa',\r\n    'rpe_title_8': 'Atividade vigorosa',\r\n    'rpe_title_9': 'Atividade muito difícil',\r\n    'rpe_title_10': 'Esforço máximo',\r\n    'rpe_desc_1': 'Quase nenhum esforço, porém mais que assistir TV ou dormir.',\r\n    'rpe_desc_2': 'Conseguiria manter por horas. Respira facilmente e consegue conversar normalmente.',\r\n    'rpe_desc_3': 'Conseguiria manter por horas. Respira facilmente e consegue conversar normalmente.',\r\n    'rpe_desc_4': 'Respira com dificuldade, conseguiria manter uma conversa, mas seria mais difícil.',\r\n    'rpe_desc_5': 'Respira com dificuldade, conseguiria manter uma conversa, mas seria mais difícil.',\r\n    'rpe_desc_6': 'Respira com dificuldade, conseguiria manter uma conversa, mas seria mais difícil.',\r\n    'rpe_desc_7': 'Quase desconfortável, falta fôlego, consegue dizer uma frase no máximo.',\r\n    'rpe_desc_8': 'Quase desconfortável, falta fôlego, consegue dizer uma frase no máximo.',\r\n    'rpe_desc_9': 'Muito difícil de manter, mal consegue respirar, consegue dizer apenas algumas palavras.',\r\n    'rpe_desc_10': 'Impossível continuar, totalmente sem fôlego, não consegue falar.',\r\n    'rpe': 'Escala de esforço ',\r\n    'workouts_list': 'Lista de treinos',\r\n    'workout_name': 'Nome do treino',\r\n    'add_workout': 'Adicionar treino',\r\n    'remove_workout': 'Remover treino',\r\n    'no_workout': 'Nenhum treino disponível',\r\n    'times_up': 'Descanso acabou!',\r\n    'duration_up': 'Exercício acabou!',\r\n    'load_error': 'Não foi possível carregar os dados',\r\n    'persist_error': 'Não foi possível salvar as alterações'\r\n};\r\n","import { useEffect, useState } from 'react';\r\nimport * as translations from '../util/translations';\r\n\r\nexport default function useTranslation() {\r\n    const [language, setLanguage] = useState('en');\r\n\r\n    useEffect(() => {\r\n        const navigatorLanguage = window.navigator.language.split('-')[0];\r\n        if (['en', 'pt'].includes(navigatorLanguage)) {\r\n            setLanguage(navigatorLanguage);\r\n        } else {\r\n            setLanguage('en');\r\n        }\r\n    }, []);\r\n\r\n    const fallback = translations.en;\r\n\r\n    const t = (key) => {\r\n        const translation = translations[language];\r\n\r\n        return translation[key] || fallback[key] || key;\r\n    };\r\n\r\n    return { t, language };\r\n}","export default function hasIncompleteSets(exercise) {\r\n    return exercise.sets.some(s => s.stage !== 'COMPLETE');\r\n}","export default function timeFormat(seconds) {\r\n    if (seconds < 0) {\r\n        return `-${timeFormat(Math.abs(seconds))}`;\r\n    }\r\n    const pad = (val) => `${val % 60}`.padStart(2, '0');\r\n    const minutes = Math.floor(seconds / 60);\r\n    if (minutes === 0) {\r\n        return `${seconds}`;\r\n    }\r\n    if (minutes >= 60) {\r\n        const hours = Math.floor(minutes / 60);\r\n        return `${hours}:${pad(minutes)}:${pad(seconds)}`;\r\n    }\r\n    return `${minutes}:${pad(seconds)}`;\r\n}","export function Container(props) {\r\n    const { children } = props;\r\n    return <div className='container bg-white max-w-5xl min-h-screen m-auto border shadow-md place-self-center pb-24'>{children}</div>;\r\n}\r\n\r\nexport function Footer(props) {\r\n    const { children } = props;\r\n    return <div className='fixed flex justify-center bottom-0 w-screen left-0'>\r\n        <div className='flex justify-end items-center border-t border-indigo-200 bg-white w-full max-w-5xl p-3 pb-8'>{children}</div>\r\n    </div>;\r\n}\r\n\r\nexport function Button(props) {\r\n    const { Icon, type='neutral', label, ...buttonProps } = props;\r\n\r\n    const colorClasses = {\r\n        primary: 'bg-blue-500 ml-2 border-blue-600 focus:ring-blue-200 active:bg-blue-700',\r\n        neutral: 'bg-indigo-500 ml-2 border-indigo-600 focus:ring-indigo-200 active:bg-indigo-700',\r\n        success: 'bg-green-500 ml-2 border-green-600 focus:ring-green-200 active:bg-green-700'\r\n    };\r\n\r\n    const colorClass = colorClasses[type] || colorClasses.neutral;\r\n\r\n    return (\r\n        <button {...buttonProps} className={`border flex uppercase focus:ring-2 text-sm items-center text-white px-3 py-2 rounded-md ${colorClass}`}>\r\n            {Icon && <Icon className='mr-1 text-lg' />} {label}\r\n        </button>\r\n    );\r\n}\r\n\r\nexport function DecoratedBlock(props) {\r\n    const { type = 'neutral', children } = props;\r\n\r\n    const colorClasses = {\r\n        primary: 'border-blue-500 text-blue-700',\r\n        neutral: 'border-indigo-500 text-indigo-700',\r\n        success: 'border-green-500 text-green-700'\r\n    };\r\n\r\n    const colorClass = colorClasses[type] || colorClasses.neutral;\r\n\r\n    return (\r\n        <div className={`text-xl mr-auto border-l-2 pl-2 bg-white ${colorClass}`}>\r\n            {children}\r\n        </div>\r\n    );\r\n}\r\n\r\nexport function TextLabel(props) {\r\n    const { small = false, className, children } = props;\r\n\r\n    const sizeClass = small ? 'text-xs' : 'text-sm';\r\n\r\n    return (\r\n        <p className={`${sizeClass} uppercase tracking-wider ${className}`}>{children}</p>\r\n    );\r\n}\r\n\r\nexport function SingleInputForm(props) {\r\n    const { onSubmit, value, onChange, placeholder, label } = props;\r\n\r\n    return (\r\n        <form onSubmit={onSubmit} className='m-3 pt-3 border-t border-indigo-200'>\r\n            <div className='flex p-2 items-center bg-indigo-50 rounded-xl border border-indigo-200'>\r\n                <input required value={value} onChange={onChange}\r\n                    className='text-indigo-800 px-2 w-2 flex-1 py-1 rounded border border-indigo-200 placeholder-indigo-400 focus:ring-2 focus:ring-indigo-200'\r\n                    type='text' placeholder={placeholder} />\r\n            </div>\r\n            <div className='flex justify-end mt-1'>\r\n                <button\r\n                    className='text-indigo-500 text-sm px-1'> {label}\r\n                </button>\r\n            </div>\r\n        </form>\r\n    );\r\n}\r\n\r\nexport function Block(props) {\r\n    const { isActive = false, type='neutral', children } = props;\r\n\r\n    const colorClasses = {\r\n        primary: `border-blue-200 bg-blue-50 ${isActive ? 'ring-2 ring-blue-200' : ''}`,\r\n        neutral: `border-indigo-200 bg-indigo-50 ${isActive ? 'ring-2 ring-indigo-200' : ''}`,\r\n        success: `border-green-200 bg-green-50 ${isActive ? 'ring-2 ring-green-200' : ''}`,\r\n    };\r\n\r\n    let colorClass = colorClasses[type] || colorClasses.neutral;\r\n\r\n    return <div className={`p-2 border ${colorClass} rounded-xl`}>{children}</div>;\r\n}\r\n\r\nexport function List(props) {\r\n    const { children } = props;\r\n    return <ul className='flex flex-col space-y-3'>{children}</ul>;\r\n}\r\n\r\nexport function ListItem(props) {\r\n    const { isActive, children, className, ...itemProps } = props;\r\n    const ring = isActive ? 'ring-2 ring-indigo-200 border-indigo-400' : '';\r\n    return <div {...itemProps} className={`bg-white p-2 rounded-md shadow border border-indigo-200 ${ring} ${className}`}>{children}</div>;\r\n}\r\n\r\nexport function TitleH3(props) {\r\n    const { children, className, onClick } = props;\r\n    return <button onClick={onClick} className={`text-lg self-start font-semibold text-indigo-800 select-none cursor-pointer ${className}`}>{children}</button>;\r\n}\r\n\r\nexport function EmptyMessage(props) {\r\n    const { children } = props;\r\n    return <p className='text-indigo-500 text-sm pb-1'>{children}</p>;\r\n}\r\n\r\nexport function LightButton(props) {\r\n    const { children, ...buttonProps } = props;\r\n    return <button {...buttonProps} className='text-indigo-500 text-sm px-1'>{children}</button>;\r\n}\r\n\r\nexport function BlockActions(props) {\r\n    const { children } = props;\r\n    return <div className='flex justify-end mt-1 space-x-4'>{children}</div>;\r\n}","import { openDB } from 'idb';\r\n\r\nexport default class Database {\r\n    constructor() {\r\n        this.db = null;\r\n    }\r\n    async init() {\r\n        if (!('indexedDB' in window)) {\r\n            alert('This app needs indexedDb support to run.');\r\n            return;\r\n        }\r\n        this.db = await openDB('workoutTracker', 1, {\r\n            upgrade(db) {\r\n                if (!db.objectStoreNames.contains('workouts')) {\r\n                    db.createObjectStore('workouts', { keyPath: 'id' });\r\n                }\r\n                if (!db.objectStoreNames.contains('logs')) {\r\n                    db.createObjectStore('logs', { autoIncrement: true });\r\n                }\r\n            }\r\n        });\r\n    }\r\n\r\n    async getAllData(storeName) {\r\n        const data = [];\r\n\r\n        const transaction = this.db.transaction(storeName, 'readonly');\r\n        const store = transaction.objectStore(storeName);\r\n\r\n        let cursor = await store.openCursor();\r\n        while(cursor) {\r\n            const value = cursor.value;\r\n            value.persistenceKey = cursor.key;\r\n            data.push(value);\r\n            cursor = await cursor.continue();\r\n        }\r\n\r\n        return data;  \r\n    }\r\n\r\n    getData(storeName, key) {\r\n        const transaction = this.db.transaction(storeName, 'readonly');\r\n        const store = transaction.objectStore(storeName);\r\n        return store.get(key);  \r\n    }\r\n\r\n    runInWorkouts(operation) {\r\n        const transaction = this.db.transaction('workouts', 'readwrite');\r\n        const store = transaction.objectStore('workouts');\r\n        operation(store);\r\n        return transaction.complete;  \r\n    }\r\n\r\n    runInLogs(operation) {\r\n        const transaction = this.db.transaction('logs', 'readwrite');\r\n        const store = transaction.objectStore('logs');\r\n        operation(store);\r\n        return transaction.complete;  \r\n    }\r\n\r\n    saveLogEntry(logEntry) {\r\n        return this.runInLogs((store) => store.add(logEntry));\r\n    }\r\n\r\n    eraseLogEntry(key) {\r\n        return this.runInLogs((store) => store.delete(key));\r\n    }\r\n\r\n    saveWorkout(workout) {\r\n        return this.runInWorkouts((store) => store.add(workout));\r\n    }\r\n\r\n    eraseWorkout(id) {\r\n        return this.runInWorkouts((store) => store.delete(id));\r\n    }\r\n\r\n    async getLastLogEntry(workoutId) {\r\n        const data = await this.getAllData('logs');\r\n\r\n        const lastLogEntry = data\r\n            .filter(entry => entry.id === workoutId)\r\n            .sort((a, b) => b.date - a.date);\r\n\r\n        return lastLogEntry[0];\r\n    }\r\n\r\n    async loadNewWorkout(id) {\r\n        const workout = await this.getData('workouts', id);\r\n\r\n        workout.date = new Date();\r\n        workout.isComplete = false;\r\n        workout.duration = 0;\r\n\r\n        for (const exercise of workout.exercises) {\r\n            for (const set of exercise.sets) {\r\n                set.stage = 'IDLE';\r\n            }\r\n        }\r\n\r\n        return workout;\r\n    }\r\n\r\n    async loadWorkoutFromLogs(id) {\r\n        const workout = await this.getData('logs', id);\r\n\r\n        workout.date = new Date(workout.date);\r\n\r\n        for (const exercise of workout.exercises) {\r\n            for (const set of exercise.sets) {\r\n                set.stage = 'COMPLETE';\r\n            }\r\n        }\r\n    \r\n        return workout;\r\n    }\r\n\r\n    async saveWorkoutTemplate(id, exercises) {\r\n        const workout = await this.getData('workouts', id);\r\n        workout.exercises = exercises;\r\n        return this.runInWorkouts((store) => store.put(workout));\r\n    }\r\n\r\n    loadWorkoutLogById(id, createNew = true) {\r\n        if (createNew) {\r\n            return this.loadNewWorkout(id);\r\n        }\r\n        return this.loadWorkoutFromLogs(id);\r\n    }\r\n}\r\n","import { useEffect, useState } from 'react';\r\nimport Database from '../util/workoutPersistence';\r\n\r\nexport default function usePersistence() {\r\n    const [db, setDb] = useState(null);\r\n\r\n    useEffect(() => {\r\n        const database = new Database();\r\n        database.init().then(() => setDb(database));\r\n    }, []);\r\n\r\n    return db;\r\n}","export function getWorkout(id) {\r\n    const workout = {\r\n        id,\r\n        isComplete: true,\r\n        activeSetId: null,\r\n        activeExerciseId: null\r\n    };\r\n\r\n    workout.date = new Date();\r\n    workout.name = document.querySelector('.workout-name').textContent.trim();\r\n    workout.duration = Number(\r\n        document.querySelector('.workout-duration').dataset.value\r\n    );\r\n    workout.exercises = [];\r\n\r\n    const $exercises = document.querySelectorAll('.exercise');\r\n    for (const $exercise of $exercises) {\r\n        const exercise = {};\r\n        exercise.name = $exercise.querySelector(\r\n            '.exercise-name'\r\n        ).textContent.trim();\r\n        exercise.id = $exercise.dataset.id;\r\n        exercise.type = $exercise.dataset.type;\r\n        exercise.sets = [];\r\n\r\n        const $sets = $exercise.querySelectorAll('.set-display');\r\n        for (const $set of $sets) {\r\n            const set = {};\r\n            set.id = $set.dataset.id;\r\n            set.defaultDurationTime = Number(\r\n                $set.querySelector('.time .value')?.dataset?.value\r\n            );\r\n            set.defaultReps = Number(\r\n                $set.querySelector('.reps .value').dataset.value\r\n            );\r\n            set.defaultWeight = Number(\r\n                $set.querySelector('.weight .value').dataset.value\r\n            );\r\n            set.defaultRestTime = Number(\r\n                $set.querySelector('.rest .value').dataset.value\r\n            );\r\n            set.stage = 'COMPLETE';\r\n            exercise.sets.push(set);\r\n        }\r\n        exercise.rpe = Number($exercise.querySelector('.rpe')?.value) || 5;\r\n        workout.exercises.push(exercise);\r\n    }\r\n\r\n    return workout;\r\n}\r\n\r\nexport default function serializeWorkout(id) {\r\n    return JSON.stringify(getWorkout(id));\r\n}","import { format } from 'date-fns';\r\n\r\nimport pt from 'date-fns/locale/pt-BR';\r\nimport en from 'date-fns/locale/en-US';\r\n\r\nconst locales = { pt, en };\r\n\r\nimport { useState } from 'react';\r\nimport useTranslation from '../hooks/useTranslation';\r\n\r\nimport {\r\n    BiCheck,\r\n    BiPause,\r\n    BiPlay,\r\n    BiRefresh,\r\n    BiStar,\r\n    BiStopwatch,\r\n    BiTrophy\r\n} from 'react-icons/bi';\r\nimport hasIncompleteExercises from '../util/hasIncompleteExercises';\r\nimport hasIncompleteSets from '../util/hasIncompleteSets';\r\nimport timeFormat from '../util/timeFormat';\r\n\r\nimport { Button, DecoratedBlock, Footer, TextLabel } from '../ui';\r\nimport usePersistence from '../hooks/usePersistence';\r\nimport { getWorkout } from '../util/serializeWorkout';\r\n\r\nfunction CycleButton({ stage, onClick = () => {} }) {\r\n    const { t } = useTranslation();\r\n    \r\n    const labels = {\r\n        IDLE: t('start'),\r\n        ACTIVE: t('rest'),\r\n        RESTING: t('complete'),\r\n        COMPLETE: t('reset')\r\n    };\r\n\r\n    const icons = {\r\n        IDLE: BiPlay,\r\n        ACTIVE: BiPause,\r\n        RESTING: BiCheck,\r\n        COMPLETE: BiRefresh\r\n    };\r\n\r\n    const types = {\r\n        IDLE: 'neutral',\r\n        ACTIVE: 'neutral',\r\n        RESTING: 'neutral',\r\n        COMPLETE: 'primary'\r\n    };\r\n\r\n    const label = labels[stage];\r\n    const Icon = icons[stage];\r\n    const type = types[stage];\r\n\r\n    return (\r\n        <Button\r\n            onClick={onClick}\r\n            type={type}\r\n            label={label}\r\n            Icon={Icon}\r\n        />\r\n    );\r\n}\r\n\r\nexport default function Actions(props) {\r\n    const { state, dispatch, isReadOnly, timer } = props;\r\n\r\n    const { t, language } = useTranslation();\r\n    const db = usePersistence();\r\n\r\n    const [isComplete, setIsComplete] = useState(false);\r\n\r\n    const updateStage = () => {\r\n        dispatch({\r\n            type: 'UPDATE_SET_STAGE'\r\n        });\r\n    };\r\n\r\n    const completeExercise = () => {\r\n        dispatch({\r\n            type: 'COMPLETE_EXERCISE'\r\n        });\r\n    };\r\n\r\n    const completeWorkout = () => {\r\n        const willSave = window.confirm(\r\n            t('save_progress')\r\n        );\r\n        if (!willSave) {\r\n            return;\r\n        }\r\n        const workout = getWorkout(state.id);\r\n        db?.saveLogEntry(workout);\r\n        setIsComplete(true);\r\n        timer.pause();\r\n        dispatch({\r\n            type: 'COMPLETE_WORKOUT'\r\n        });\r\n    };\r\n\r\n    const onStartWorkout = () => {\r\n        timer.play();\r\n        dispatch({\r\n            type: 'UPDATE_ACTIVE_SET',\r\n            payload: {\r\n                exerciseId: state.exercises[0]?.id,\r\n                setId: state.exercises[0]?.sets[0]?.id,\r\n            }\r\n        });\r\n        dispatch({\r\n            type: 'UPDATE_SET_STAGE'\r\n        });\r\n    };\r\n\r\n    let footerButtons = [null, null];\r\n\r\n    const exercise = state.exercises.find(\r\n        e => e.id === state.activeExerciseId\r\n    );\r\n\r\n    const set = exercise ? exercise.sets.find(\r\n        s => s.id === state.activeSetId\r\n    ) : null;\r\n\r\n    const hasActiveSet = Boolean(set);\r\n    const hasExercises = state.exercises.length > 0;\r\n    const hasSets = state.exercises[0]?.sets.length > 0;\r\n\r\n    if (!isReadOnly && !isComplete) {\r\n        if (timer.isRunning) {\r\n            if (hasActiveSet) {\r\n                footerButtons[0] = <CycleButton\r\n                    onClick={updateStage}\r\n                    stage={set.stage}\r\n                />;\r\n            }\r\n        \r\n            if (!hasIncompleteExercises(state)) {\r\n                footerButtons[1] = <Button\r\n                    type='success'\r\n                    label={t('finish_workout')}\r\n                    Icon={BiTrophy}\r\n                    onClick={completeWorkout}\r\n                />;\r\n            } else if (!hasIncompleteSets(exercise)) {\r\n                footerButtons[1] = <Button\r\n                    type='success'\r\n                    label={t('finish_exercise')}\r\n                    Icon={BiStar}\r\n                    onClick={completeExercise}\r\n                />;\r\n            }\r\n        } else if (hasExercises && hasSets && !isComplete) {\r\n            footerButtons[0] = <Button\r\n                type='primary'\r\n                label={t('start_workout')}\r\n                onClick={onStartWorkout}\r\n                Icon={BiPlay}\r\n            />;\r\n        }\r\n    }\r\n\r\n    const timerType = timer.isRunning || !isComplete ? 'neutral' : 'success';\r\n    const locale = locales[language];\r\n    const formatOptions = {};\r\n    if (locale) {\r\n        formatOptions.locale = locale;\r\n    }\r\n\r\n    const date = state.date || new Date();\r\n    return (\r\n        <Footer>\r\n            <DecoratedBlock type={timerType}>\r\n                <BiStopwatch className='inline -mt-1 mr-1 -ml-1' />\r\n                <time\r\n                    className='workout-duration'\r\n                    data-value={timer.value}\r\n                >{timeFormat(timer.value)}</time>\r\n                <TextLabel small>\r\n                    {format(date, 'PP', formatOptions)}\r\n                </TextLabel>\r\n            </DecoratedBlock>\r\n            {footerButtons[0]} {footerButtons[1]}\r\n        </Footer>\r\n    );\r\n}","import hasIncompleteSets from './hasIncompleteSets';\r\n\r\nexport default function hasIncompleteExercises(workout) {\r\n    return workout.exercises.some(hasIncompleteSets);\r\n}","import { useState } from 'react';\r\nimport useTranslation from '../hooks/useTranslation';\r\n\r\nimport { SingleInputForm } from '../ui';\r\n\r\nexport default function AddExercise(props) {\r\n    const { t } = useTranslation();\r\n\r\n    const [ name, setName ] = useState('');\r\n    const { dispatch } = props;\r\n\r\n    const onAddExercise = (ev) => {\r\n        ev.preventDefault();\r\n        setName('');\r\n        dispatch({\r\n            type: 'ADD_EXERCISE',\r\n            payload: { name }\r\n        });\r\n    };\r\n\r\n    return <SingleInputForm\r\n        onSubmit={onAddExercise}\r\n        onChange={ev => setName(ev.target.value)}\r\n        placeholder={t('exercise_name')}\r\n        label={t('add_exercise')}\r\n        value={name}\r\n    />;\r\n}","import { useEffect, useState } from 'react';\r\n\r\nexport default function useNotification() {\r\n    const [hasAskedPermission, setHasAskedPermission] = useState(false);\r\n    const [\r\n        hasNotificationPermission,\r\n        setHasNotificationPermission\r\n    ] = useState(false);\r\n\r\n    if (!('Notification' in window)) {\r\n        return {\r\n            // Behave as if permission was asked, but denied\r\n            hasAskedPermission: true,\r\n            notify: () => {},\r\n            hasNotificationPermission,\r\n            requestNotificationPermission: () => {}\r\n        };\r\n    }\r\n\r\n    useEffect(() => {\r\n        setHasNotificationPermission(Notification.permission === 'granted');\r\n        setHasAskedPermission(Notification.permission !== 'default');\r\n    }, []);\r\n\r\n    async function requestNotificationPermission() {\r\n        const permission = await Notification.requestPermission();\r\n        setHasNotificationPermission(permission === 'granted');\r\n        setHasAskedPermission(true);\r\n    }\r\n\r\n    function notify(msg) {\r\n        new Notification('Workout tracker', {\r\n            body: msg,\r\n            vibrate: true\r\n        });\r\n    }\r\n\r\n    return {\r\n        hasAskedPermission,\r\n        notify,\r\n        hasNotificationPermission,\r\n        requestNotificationPermission\r\n    };\r\n}","import { useEffect, useState } from 'react';\r\n\r\nexport default function useTimer(\r\n    timerId = 'timer', initialTimer = 0, increment = 1\r\n) {\r\n    const [timer, setTimer] = useState(initialTimer);\r\n    const [isRunning, setIsRunning] = useState(false);\r\n    const [isBackground, setIsBackground] = useState(\r\n        document.visibilityState !== 'visible'\r\n    );\r\n    const sessionStorage = window.sessionStorage;\r\n\r\n    const play = () => setIsRunning(true);\r\n    const pause = () => setIsRunning(false);\r\n\r\n    useEffect(() => {\r\n        if (isRunning && !isBackground) {\r\n            const interval = setInterval(() => {\r\n                setTimer((t) => Math.max(t + increment, 0));\r\n            }, 1000);\r\n            return () => clearInterval(interval);\r\n        }\r\n    }, [isRunning, isBackground]);\r\n\r\n    useEffect(() => {\r\n        const onVisibilityChange = () => {\r\n            setIsBackground(\r\n                document.visibilityState !== 'visible'\r\n            );\r\n        };\r\n        window.addEventListener(\r\n            'visibilitychange', onVisibilityChange\r\n        );\r\n\r\n        return () => window.removeEventListener(\r\n            'visibilitychange', onVisibilityChange\r\n        );\r\n    }, []);\r\n\r\n    useEffect(() => {\r\n        if (isBackground) {\r\n            sessionStorage.setItem(timerId, Date.now());\r\n        } else if (isRunning) {\r\n            const lastTimer = Number(sessionStorage.getItem(timerId));\r\n            if (lastTimer && isRunning) {\r\n                const ellapsed = Math.floor(\r\n                    (Date.now() - lastTimer) / (1000 * increment)\r\n                );\r\n                setTimer(t => Math.max(t + ellapsed, 0));\r\n            }\r\n        }\r\n    }, [isBackground]);\r\n\r\n    return { play, pause, value: timer, isRunning, set: setTimer };\r\n}\r\n","import { useEffect, useRef, useState } from 'react';\r\nimport timeFormat from '../util/timeFormat';\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport { ListItem, TextLabel } from '../ui';\r\nimport useNotification from '../hooks/useNotification';\r\nimport useTimer from '../hooks/useTimer';\r\n\r\nfunction SetInputField(props) {\r\n    const {\r\n        inputProps,\r\n        labelText,\r\n        value = null,\r\n        formatFunction = val => val,\r\n        type = 'neutral',\r\n        isEdit = false,\r\n        onToggleEdit = () => {},\r\n        onChange = () => {}\r\n    } = props;\r\n\r\n    const labelColorClass = {\r\n        primary: 'text-blue-800',\r\n        neutral: 'text-indigo-800',\r\n        success: 'text-green-800',\r\n        danger: 'text-red-800',\r\n        highlight: 'text-cyan-800'\r\n    };\r\n    \r\n    const inputColorClass = {\r\n        primary: 'text-blue-800 bg-blue-50 border-blue-200 focus:ring-blue-100',\r\n        neutral: 'text-indigo-800 bg-indigo-50 border-indigo-200 focus:ring-indigo-100',\r\n        success: 'text-green-800 bg-green-50 border-green-200 focus:ring-green-100',\r\n        danger: 'text-red-800 bg-red-50 border-red-200 focus:ring-red-100',\r\n        highlight: 'text-cyan-800 bg-cyan-50 border-cyan-200 focus:ring-cyan-100'\r\n    };\r\n\r\n    return (\r\n        <label className={labelColorClass[type]}>\r\n            <TextLabel className='mb-1'>{labelText}</TextLabel>\r\n            {\r\n                isEdit ? (\r\n                    <input\r\n                        {...inputProps}\r\n                        className={`block tabuler-nums w-full px-1 rounded shadow-sm border focus:ring-2 ${inputColorClass[type]}`}\r\n                        value={value}\r\n                        autoFocus\r\n                        onFocus={ev => ev.target.select()}\r\n                        onBlur={() => isEdit && onToggleEdit(false)}\r\n                        onChange={ev => onChange(Number(ev.target.value))}\r\n                    ></input>\r\n                ) : (\r\n                    <span data-value={value} tabIndex={0} onFocus={() => isEdit || onToggleEdit(true)} className={`value block tabuler-nums w-full px-1 rounded shadow-sm border ${inputColorClass[type]}`}>\r\n                        {formatFunction(Number(value))}\r\n                    </span>\r\n                )\r\n            }\r\n        </label>\r\n    );\r\n}\r\n\r\nexport default function SetDisplay(props) {\r\n    const {\r\n        id,\r\n        exerciseType,\r\n        exerciseId,\r\n        defaultDurationTime = 0,\r\n        defaultRestTime = 30,\r\n        defaultReps = 8,\r\n        defaultWeight = 10,\r\n        isReadOnly = false,\r\n        onClick = () => {},\r\n        dispatch = () => {},\r\n        isActive = true,\r\n        stage = 'IDLE'\r\n    } = props;\r\n\r\n    const durationTimer = useTimer('durationTimer', defaultDurationTime, -1);\r\n    const restTimer = useTimer('restTimer', defaultRestTime, -1);\r\n\r\n    const [notifiedDuration, setNotifiedDuration] = useState(false);\r\n    const [notifiedRest, setNotifiedRest] = useState(true);\r\n\r\n    const [reps, setReps] = useState(defaultReps);\r\n    const [weight, setWeight] = useState(defaultWeight);\r\n\r\n    const [isEditTime, setIsEditTime] = useState(false);\r\n    const [isEditReps, setIsEditReps] = useState(false);\r\n    const [isEditWeight, setIsEditWeight] = useState(false);\r\n    const [isEditRest, setIsEditRest] = useState(false);\r\n\r\n    const { notify } = useNotification();\r\n    const prevStageRef = useRef();\r\n\r\n    const { t } = useTranslation();\r\n\r\n    useEffect(() => {\r\n        if (stage === 'ACTIVE') {\r\n            setNotifiedDuration(false);\r\n            setNotifiedRest(false);\r\n        }\r\n    }, [stage]);\r\n\r\n    useEffect(() => {\r\n        if (isEditTime || isEditReps || isEditWeight || isEditRest) {\r\n            dispatch({\r\n                type: 'UPDATE_ACTIVE_SET',\r\n                payload: {\r\n                    setId: id,\r\n                    exerciseId\r\n                }\r\n            });\r\n\r\n        }\r\n    }, [\r\n        dispatch, isEditTime, isEditReps, isEditRest,\r\n        isEditWeight, id, exerciseId\r\n    ]);\r\n\r\n    useEffect(() => {\r\n        if (stage === 'COMPLETE' && restTimer.value < 0) {\r\n            restTimer.set((t) => defaultRestTime + Math.abs(t));\r\n        }\r\n    }, [stage, defaultRestTime]);\r\n\r\n    useEffect(() => {\r\n        if (stage === 'IDLE' && prevStageRef.current === 'COMPLETE') {\r\n            durationTimer.set(0);\r\n            restTimer.set(defaultRestTime);\r\n            setReps(defaultReps);\r\n            setWeight(defaultWeight);\r\n        }\r\n    }, [defaultRestTime, defaultReps, defaultWeight, stage]);\r\n\r\n    useEffect(() => {\r\n        prevStageRef.current = stage;        \r\n    }, [stage]);\r\n\r\n    useEffect(() => {\r\n        if (stage === 'ACTIVE' && !isEditTime && exerciseType == 'cardio') {\r\n            if (!Number.isFinite(durationTimer.value)) {\r\n                durationTimer.set(0);\r\n            }\r\n            durationTimer.play();\r\n        } else {\r\n            durationTimer.pause();\r\n        }\r\n    }, [stage, durationTimer, isEditTime, exerciseType]);\r\n\r\n    useEffect(() => {\r\n        if (stage === 'RESTING' && !isEditRest) {\r\n            restTimer.play();\r\n        } else {\r\n            restTimer.pause();\r\n        }\r\n    }, [stage, restTimer, isEditRest]);\r\n\r\n    useEffect(() => {\r\n        if (stage !== 'ACTIVE' || exerciseType !== 'cardio') {\r\n            return;\r\n        }\r\n\r\n        if (restTimer.value === 0 && !notifiedRest) {\r\n            notify(t('times_up'));\r\n            setNotifiedRest(true);\r\n        }\r\n\r\n        if (durationTimer.value === 0 && !notifiedDuration) {\r\n            notify(t('duration_up'));\r\n            setNotifiedDuration(true);\r\n        }\r\n    }, [restTimer, durationTimer, stage, exerciseType]);\r\n\r\n    const numericInputProps = {\r\n        type: 'number',\r\n        pattern: '\\\\d+',\r\n        min: '0',\r\n        inputMode: 'numeric',\r\n    };\r\n\r\n    const baseType = stage === 'COMPLETE' ? 'success' : 'neutral';\r\n\r\n    const getTypeForTimer = (timer, baseStage) => {\r\n        if (stage === baseStage) {\r\n            return timer.value < 0 ? 'danger' : 'highlight';\r\n        }\r\n        return baseType;\r\n    };\r\n\r\n    return (\r\n        <ListItem\r\n            onClick={onClick}\r\n            data-id={id}\r\n            className='set-display flex space-x-2'\r\n            isActive={isActive && !isReadOnly}\r\n        >\r\n            {\r\n                (\r\n                    Number.isFinite(durationTimer.value) &&\r\n                    exerciseType === 'cardio'\r\n                ) && (\r\n                    <div className='time flex-1'>\r\n                        <SetInputField\r\n                            inputProps={numericInputProps}\r\n                            isEdit={isEditTime && !isReadOnly}\r\n                            onToggleEdit={setIsEditTime}\r\n                            onChange={durationTimer.set}\r\n                            value={Math.abs(durationTimer.value)}\r\n                            formatFunction={timeFormat}\r\n                            type={getTypeForTimer(durationTimer, 'ACTIVE')}\r\n                            labelText={t('time')}\r\n                            defaultValue='0'\r\n                        />\r\n                    </div>\r\n                )\r\n            }\r\n            <div className='reps flex-1'>\r\n                <SetInputField\r\n                    inputProps={numericInputProps}\r\n                    isEdit={isEditReps && !isReadOnly}\r\n                    onToggleEdit={setIsEditReps}\r\n                    onChange={setReps}\r\n                    value={reps}\r\n                    type={baseType}\r\n                    labelText={t('reps')}\r\n                    defaultValue='8'\r\n                />\r\n            </div>\r\n            <div className='weight flex-1'>\r\n                <SetInputField\r\n                    inputProps={numericInputProps}\r\n                    isEdit={isEditWeight && !isReadOnly}\r\n                    onToggleEdit={setIsEditWeight}\r\n                    onChange={setWeight}\r\n                    value={weight}\r\n                    type={baseType}\r\n                    labelText={t('weight')}\r\n                    defaultValue='10'\r\n                />\r\n            </div>\r\n            <div className='rest flex-1'>\r\n                <SetInputField\r\n                    inputProps={numericInputProps}\r\n                    isEdit={isEditRest && !isReadOnly}\r\n                    onToggleEdit={setIsEditRest}\r\n                    onChange={restTimer.set}\r\n                    value={Math.abs(restTimer.value)}\r\n                    type={getTypeForTimer(restTimer, 'RESTING')}\r\n                    formatFunction={timeFormat}\r\n                    labelText={t('rest')}\r\n                    defaultValue={defaultRestTime}\r\n                />\r\n            </div>\r\n        </ListItem>\r\n    );\r\n}","import { BiInfoCircle } from 'react-icons/bi';\r\nimport { useState } from 'react';\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport { ListItem } from '../ui';\r\n\r\nexport default function RPEScale(props) {\r\n    const { defaultRPE = 5, isReadOnly } = props;\r\n\r\n    const { t } = useTranslation();\r\n    const [value, setValue] = useState(defaultRPE);\r\n    const [expand, setExpand] = useState(false);\r\n\r\n    const rpeTitles = [\r\n        t('rpe_title_1'),\r\n        t('rpe_title_2'),\r\n        t('rpe_title_3'),\r\n        t('rpe_title_4'),\r\n        t('rpe_title_5'),\r\n        t('rpe_title_6'),\r\n        t('rpe_title_7'),\r\n        t('rpe_title_8'),\r\n        t('rpe_title_9'),\r\n        t('rpe_title_10')\r\n    ];\r\n\r\n    const rpeDescriptions = [\r\n        t('rpe_desc_1'),\r\n        t('rpe_desc_2'),\r\n        t('rpe_desc_3'),\r\n        t('rpe_desc_4'),\r\n        t('rpe_desc_5'),\r\n        t('rpe_desc_6'),\r\n        t('rpe_desc_7'),\r\n        t('rpe_desc_8'),\r\n        t('rpe_desc_9'),\r\n        t('rpe_desc_10')\r\n    ];\r\n\r\n    return (\r\n        <>\r\n            <hr className='border-t border-indigo-200'></hr>\r\n            <ListItem>\r\n                <span className='uppercase text-sm tracking-wider text-indigo-700'>{t('rpe')}\r\n                <button onClick={() => setExpand(!expand)}><BiInfoCircle className='inline ml-1 mb-1' /></button></span>\r\n                <input\r\n                    className={`rpe val-${value}`}\r\n                    type='range'\r\n                    min='1'\r\n                    value={value}\r\n                    onChange={ev => isReadOnly || setValue(ev.target.value)}\r\n                    max='10'\r\n                    step='1'\r\n                />\r\n                <ul className='tracks flex w-full justify-between text-xs -mt-1 text-indigo-700'>\r\n                    {Array.from(Array(10).keys()).map((i) => \r\n                        <li key={i}>{i + 1}</li>\r\n                    )}\r\n                </ul>\r\n                {\r\n                    expand && (\r\n                        <>\r\n                            <hr className='mt-2 border-t border-indigo-200' />\r\n                            <h4 className='text-xs font-semibold mb-1 mt-2 text-indigo-700'>{rpeTitles[value - 1]}</h4>\r\n                            <p className='text-xs text-indigo-700'>{rpeDescriptions[value - 1]}</p>\r\n                        </>\r\n                    )\r\n                }\r\n            </ListItem>\r\n        </>\r\n    );\r\n}","import { BiChevronDown, BiChevronUp, BiDumbbell, BiRun } from 'react-icons/bi';\r\n\r\nimport SetDisplay from './SetDisplay';\r\nimport RPEScale from './RPEScale';\r\n\r\nimport '../range.css';\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport {\r\n    Block,\r\n    EmptyMessage,\r\n    List,\r\n    TitleH3,\r\n    LightButton,\r\n    BlockActions\r\n} from '../ui';\r\nimport { useState } from 'react';\r\n\r\nexport default function Exercise(props) {\r\n    const {\r\n        id,\r\n        name,\r\n        sets,\r\n        isFirst = false,\r\n        isLast = false,\r\n        isActive = false,\r\n        isComplete = false,\r\n        isReadOnly=false,\r\n        defaultRPE=5,\r\n        defaultType='weight',\r\n        isWorkoutComplete = false,\r\n        activeSetId = null,\r\n        dispatch = () => {},\r\n    } = props;\r\n\r\n    const { t } = useTranslation();\r\n    const [type, setType] = useState(defaultType);\r\n\r\n    const onRemoveSet = () => {\r\n        dispatch({\r\n            type: 'REMOVE_SET',\r\n            payload: {\r\n                exerciseId: id\r\n            }\r\n        });\r\n    };\r\n\r\n    const onAddSet = () => {\r\n        dispatch({\r\n            type: 'ADD_SET',\r\n            payload: {\r\n                exerciseId: id\r\n            }\r\n        });\r\n    };\r\n\r\n    const onActivateSet = (setId) => {\r\n        dispatch({\r\n            type: 'UPDATE_ACTIVE_SET',\r\n            payload: {\r\n                exerciseId: id,\r\n                setId\r\n            }\r\n        });\r\n    };\r\n\r\n    const moveExercise = (factor) => {\r\n        dispatch({\r\n            type: 'MOVE_EXERCISE',\r\n            payload: {\r\n                exerciseId: id,\r\n                factor\r\n            }\r\n        });\r\n    };\r\n\r\n    const typeIcons = {\r\n        cardio: <BiRun className='inline text-xl mb-1'/>,\r\n        weight: <BiDumbbell className='inline text-xl mb-1'/>\r\n    };\r\n\r\n    const toggleType = () => {\r\n        if (isReadOnly || isComplete) {\r\n            return;\r\n        }\r\n        const newType = type === 'cardio' ? 'weight' : 'cardio';\r\n        dispatch({\r\n            type: 'UPDATE_EXERCISE_TYPE',\r\n            payload: {\r\n                exerciseId: id, type: newType\r\n            }\r\n        });\r\n        setType(newType);\r\n    };\r\n\r\n    return (\r\n        <div className='exercise relative' data-id={id} data-type={type}>\r\n            {isWorkoutComplete || isReadOnly || (\r\n                <div className='absolute top-1 right-1 text-indigo-500'>\r\n                    <button\r\n                        disabled={isLast}\r\n                        onClick={() => moveExercise(1)}\r\n                        className='disabled:opacity-50 p-2'\r\n                    ><BiChevronDown /></button>\r\n                    <button\r\n                        disabled={isFirst}\r\n                        onClick={() => moveExercise(-1)}\r\n                        className='disabled:opacity-50 p-2'\r\n                    ><BiChevronUp /></button>\r\n                </div>\r\n            )}\r\n            <Block isActive={isActive}>\r\n                <List>\r\n                    <TitleH3 onClick={toggleType} className='exercise-name'>\r\n                        {typeIcons[type]} {name}\r\n                    </TitleH3>\r\n                    {sets.length ? sets.map((set) =>\r\n                        <SetDisplay\r\n                            key={set.id}\r\n                            id={set.id}\r\n                            exerciseType={type}\r\n                            exerciseId={id}\r\n                            defaultDurationTime={set.defaultDurationTime}\r\n                            defaultWeight={set.defaultWeight}\r\n                            defaultRestTime={set.defaultRestTime}\r\n                            defaultReps={set.defaultReps}\r\n                            onClick={() => onActivateSet(set.id)}\r\n                            onActivateSet={onActivateSet}\r\n                            isActive={set.id === activeSetId}\r\n                            isReadOnly={isReadOnly}\r\n                            stage={set.stage}\r\n                            dispatch={dispatch}\r\n                        ></SetDisplay>\r\n                    ) : (\r\n                        <EmptyMessage>{t('no_sets')}</EmptyMessage>\r\n                    )}\r\n                    {\r\n                        isComplete && sets.length > 0 &&\r\n                        <RPEScale\r\n                            defaultRPE={defaultRPE}\r\n                            isReadOnly={isReadOnly}\r\n                        />\r\n                    }\r\n                </List>\r\n            </Block>\r\n            {isWorkoutComplete || isReadOnly || (\r\n                <BlockActions>\r\n                    {\r\n                        isActive && activeSetId !== null &&\r\n                        <LightButton onClick={onRemoveSet}>\r\n                            {t('remove_set')}\r\n                        </LightButton>\r\n                    }\r\n                    <LightButton onClick={onAddSet}>{t('add_set')}</LightButton>\r\n                </BlockActions>\r\n            )}\r\n        </div>\r\n    );\r\n}","export default function genHash() {\r\n    return crypto.getRandomValues(new Uint32Array(1))[0].toString(16);\r\n}","import { cloneDeep } from 'lodash';\r\nimport genHash from './genHash';\r\nimport hasIncompleteSets from './hasIncompleteSets';\r\n\r\nfunction getNextStageFor(stage) {\r\n    const stages = ['IDLE', 'ACTIVE', 'RESTING', 'COMPLETE'];\r\n    const index = stages.findIndex(s => s === stage);\r\n\r\n    return stages[(index + 1) % stages.length];\r\n}\r\n\r\nfunction addNewSet(workout, payload) {\r\n    const { exerciseId } = payload;\r\n\r\n    const exercise = workout.exercises.find(\r\n        ex => ex.id === exerciseId\r\n    );\r\n    const hash = genHash();\r\n    exercise.sets = [\r\n        ...exercise.sets,\r\n        { id: hash, stage: 'IDLE' }\r\n    ];\r\n    workout.activeSetId = hash;\r\n    return workout;\r\n}\r\n\r\nfunction removeSet(workout, payload) {\r\n    const { exerciseId } = payload;\r\n\r\n    const exercise = workout.exercises.find(\r\n        ex => ex.id === exerciseId\r\n    );\r\n    const setIndex = exercise.sets.findIndex(s => s.id === workout.activeSetId);\r\n    if (setIndex !== -1) {\r\n        exercise.sets.splice(setIndex, 1);\r\n        workout.activeSetId = null;\r\n    }\r\n    return workout;\r\n}\r\n\r\nfunction updateActiveSet(workout, payload) {\r\n    const { setId, exerciseId } = payload;\r\n\r\n    workout.activeSetId = setId;\r\n    workout.activeExerciseId = exerciseId;\r\n\r\n    return workout;\r\n}\r\n\r\nfunction updateSetStage(workout, stage) {\r\n    const exercise = workout.exercises.find(\r\n        ex => ex.id === workout.activeExerciseId\r\n    );\r\n    const setIndex = exercise.sets.findIndex(\r\n        s => s.id === workout.activeSetId\r\n    );\r\n    if (setIndex === -1) {\r\n        return workout;\r\n    }\r\n\r\n    const currentStage = exercise.sets[setIndex].stage;\r\n    const nextStage = stage || getNextStageFor(\r\n        currentStage\r\n    );\r\n\r\n    if (nextStage === 'COMPLETE' && !stage) {\r\n        const nextIndex = (setIndex + 1) % exercise.sets.length;\r\n        workout.activeSetId = nextIndex > 0 ?\r\n            exercise.sets[\r\n                (setIndex + 1) % exercise.sets.length\r\n            ].id :\r\n            null;\r\n    }\r\n\r\n    exercise.sets[setIndex].stage = nextStage;\r\n\r\n    if (!hasIncompleteSets(exercise)) {\r\n        workout.activeSetId = null;\r\n    }\r\n\r\n    return workout;\r\n}\r\n\r\nfunction updateActiveExercise(workout) {\r\n    const activeExerciseIdx = workout.exercises.findIndex(\r\n        ex => ex.id === workout.activeExerciseId\r\n    );\r\n    const nextExerciseIdx = (activeExerciseIdx + 1) % workout.exercises.length;\r\n    const nextExercise = workout.exercises[nextExerciseIdx];\r\n    workout.activeExerciseId = nextExercise.id;\r\n    workout.activeSetId = nextExercise.sets[0]?.id || null;\r\n\r\n    return workout;\r\n}\r\n\r\nfunction addNewExercise(workout, payload) {\r\n    const { name } = payload;\r\n    workout.exercises.push({\r\n        id: genHash(),\r\n        name,\r\n        sets: []\r\n    });\r\n    return workout;\r\n}\r\n\r\nfunction completeWorkout(workout) {\r\n    workout.isComplete = true;\r\n    return workout;\r\n}\r\n\r\nfunction moveExercise(workout, payload) {\r\n    const { exerciseId, factor } = payload;\r\n\r\n    const exerciseIndex = workout.exercises.findIndex(e => e.id === exerciseId);\r\n\r\n    if (exerciseIndex === -1) {\r\n        return workout;\r\n    }\r\n\r\n    const newIndex = Math.min(\r\n        Math.max(0, exerciseIndex + factor), workout.exercises.length - 1\r\n    );\r\n\r\n    const exerciseA = workout.exercises[exerciseIndex];\r\n    const exerciseB = workout.exercises[newIndex];\r\n\r\n    workout.exercises[exerciseIndex] = exerciseB;\r\n    workout.exercises[newIndex] = exerciseA;\r\n\r\n    return workout;\r\n}\r\n\r\nfunction updateExerciseType(workout, payload) {\r\n    const { exerciseId, type } = payload;\r\n\r\n    const exerciseIndex = workout.exercises.findIndex(e => e.id === exerciseId);\r\n\r\n    if (exerciseIndex === -1) {\r\n        return workout;\r\n    }\r\n\r\n    workout.exercises[exerciseIndex].type = type;\r\n    return workout;\r\n}\r\n\r\nexport default function reducer(state, action) {\r\n    const workout = cloneDeep(state);\r\n\r\n    switch(action.type) {\r\n        case 'SET_WORKOUT':\r\n            return action.payload;\r\n        case 'ADD_SET':\r\n            return addNewSet(workout, action.payload);\r\n        case 'REMOVE_SET':\r\n            return removeSet(workout, action.payload);\r\n        case 'UPDATE_ACTIVE_SET':\r\n            return updateActiveSet(workout, action.payload);\r\n        case 'UPDATE_SET_STAGE':\r\n            return updateSetStage(workout);\r\n        case 'UPDATE_EXERCISE_TYPE':\r\n            return updateExerciseType(workout, action.payload);\r\n        case 'COMPLETE_EXERCISE':\r\n            return updateActiveExercise(workout);\r\n        case 'ADD_EXERCISE':\r\n            return addNewExercise(workout, action.payload);\r\n        case 'COMPLETE_WORKOUT':\r\n            return completeWorkout(workout);\r\n        case 'MOVE_EXERCISE':\r\n            return moveExercise(workout, action.payload);\r\n        default:\r\n            throw new Error();\r\n    }\r\n}","import { useEffect, useReducer } from 'react';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport Actions from './Actions';\r\nimport AddExercise from './AddExercise';\r\nimport Exercise from './Exercise';\r\n\r\nimport hasIncompleteSets from '../util/hasIncompleteSets';\r\nimport reducer from '../util/reducer';\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport useNotification from '../hooks/useNotification';\r\nimport usePersistence from '../hooks/usePersistence';\r\nimport { BiBell, BiChevronLeft, BiSave } from 'react-icons/bi';\r\nimport useTimer from '../hooks/useTimer';\r\nimport { getWorkout } from '../util/serializeWorkout';\r\n\r\nexport default function Workout(props) {\r\n    const { t } = useTranslation();\r\n    const { id, createNew = true } = props;\r\n\r\n    const db = usePersistence();\r\n    const {\r\n        requestNotificationPermission,\r\n        hasAskedPermission\r\n    } = useNotification();\r\n    const [workout, dispatch] = useReducer(reducer, null);\r\n    const timer = useTimer('mainTimer', 0);\r\n\r\n    useEffect(() => {\r\n        db?.loadWorkoutLogById(id, createNew).then((workout) => {\r\n            dispatch({\r\n                type: 'SET_WORKOUT',\r\n                payload: workout\r\n            });\r\n            timer.set(workout.duration);\r\n        });\r\n    }, [db]);\r\n\r\n    const onSaveWorkout = () => {\r\n        const uiWorkout = getWorkout(workout.id);\r\n        db.saveWorkoutTemplate(workout.id, uiWorkout.exercises);\r\n    };\r\n\r\n    if (!workout) {\r\n        return null;\r\n    }\r\n\r\n    return (\r\n        <div>\r\n            <header className='flex items-center pt-4'>\r\n                <Link className='text-indigo-500 px-3 pr-0 text-xl' to='/'><BiChevronLeft /></Link>\r\n                <h2 className='workout-name text-2xl text-indigo-800 font-semibold px-3 pr-2'>\r\n                    {workout.name}\r\n                </h2>\r\n                {hasAskedPermission ||\r\n                <button\r\n                    onClick={requestNotificationPermission}\r\n                    className='p-1 text-base text-indigo-800'\r\n                >\r\n                    <BiBell className='inline' />\r\n                </button>}\r\n                {createNew && !timer.isRunning && !workout.isComplete &&\r\n                <button onClick={onSaveWorkout} className='text-indigo-500 px-3 ml-auto text-xl' to='/'>\r\n                    <BiSave />\r\n                </button>}\r\n            </header>\r\n            <main>\r\n                {\r\n                    workout.exercises.length > 0 ? (\r\n                        <ul className='flex flex-col space-y-4 p-3'>\r\n                            {\r\n                                workout.exercises.map((exercise, i) =>\r\n                                <li key={exercise.id}>\r\n                                    <Exercise\r\n                                        id={exercise.id}\r\n                                        isFirst={i === 0}\r\n                                        isWorkoutComplete={workout.isComplete}\r\n                                        isLast={i === workout.exercises.length - 1}\r\n                                        isActive={exercise.id === workout.activeExerciseId && createNew}\r\n                                        isComplete={!hasIncompleteSets(exercise)}\r\n                                        isReadOnly={!createNew || workout.isComplete}\r\n                                        name={exercise.name}\r\n                                        sets={exercise.sets}\r\n                                        defaultRPE={exercise.rpe}\r\n                                        defaultType={exercise.type}\r\n                                        activeSetId={workout.activeSetId}\r\n                                        dispatch={dispatch}\r\n                                    />\r\n                                </li>)\r\n                            }\r\n                        </ul>\r\n                    ) : (\r\n                        <p className='px-3 my-2 text-indigo-500'>{t('no_exercise')}</p>\r\n                    )\r\n                }\r\n                {workout.isComplete || !createNew || <AddExercise dispatch={dispatch} />}\r\n            </main>\r\n            <Actions\r\n                timer={timer}\r\n                isReadOnly={!createNew}\r\n                state={workout}\r\n                dispatch={dispatch}\r\n            />\r\n        </div>\r\n    );\r\n}","import { format } from 'date-fns';\r\nimport pt from 'date-fns/locale/pt-BR';\r\nimport en from 'date-fns/locale/en-US';\r\n\r\nconst locales = { pt, en };\r\n\r\nimport { useEffect, useState } from 'react';\r\n\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport usePersistence from '../hooks/usePersistence';\r\n\r\nimport { BiDumbbell, BiTrash } from 'react-icons/bi';\r\nimport { Link } from 'react-router-dom';\r\nimport { sortBy } from 'lodash';\r\n\r\nexport default function WorkoutHistory() {\r\n    const [workoutsList, setWorkoutsList] = useState([]);\r\n\r\n    const db = usePersistence();\r\n    const { t, language } = useTranslation();\r\n\r\n    useEffect(() => {\r\n        db?.getAllData('logs').then(setWorkoutsList);\r\n    }, [db]);\r\n\r\n    const onClickRemove = async (logKey) => {\r\n        db?.eraseLogEntry(logKey);\r\n        setWorkoutsList(\r\n            workoutsList.filter(w => w.persistenceKey !== logKey)\r\n        );\r\n    };\r\n\r\n    if (!workoutsList.length) {\r\n        return null;\r\n    }\r\n\r\n    const locale = locales[language];\r\n    const formatOptions = {};\r\n    if (locale) {\r\n        formatOptions.locale = locale;\r\n    }\r\n\r\n    const sortedList = sortBy(\r\n        workoutsList, w => -w.date.valueOf()\r\n    );\r\n\r\n    return <div>\r\n        <h2 className='workout-name text-2xl text-blue-800 font-semibold px-3 pt-4'>\r\n            {t('history')}\r\n        </h2>\r\n        <ul className='flex flex-col space-y-4 p-3'>{\r\n            sortedList.map((workout) => \r\n                <Link to={{\r\n                    pathname: '/viewWorkout',\r\n                    search: `?id=${workout.persistenceKey}`\r\n                }} key={workout.persistenceKey} className='p-2 border border-blue-200 relative flex flex-wrap bg-blue-50 rounded-xl'>\r\n                    <button\r\n                        onClick={(ev) => {\r\n                            onClickRemove(workout.persistenceKey);\r\n                            ev.preventDefault();\r\n                        }}\r\n                        className='absolute p-2 top-0 right-0 text-blue-400'><BiTrash /></button>\r\n                    <h2 className='text-blue-700 w-full text-md'><BiDumbbell className='-mt-1 inline text-lg' /> {workout.name}</h2>\r\n                    <p className='text-blue-600 text-sm'>{format(workout.date, 'PPp', formatOptions)}</p>\r\n                </Link>\r\n            )\r\n        }</ul>\r\n    </div>;\r\n}","import { useState } from 'react';\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport { SingleInputForm } from '../ui';\r\n\r\nexport default function AddWorkout(props) {\r\n    const { t } = useTranslation();\r\n\r\n    const [ name, setName ] = useState('');\r\n\r\n    const { onAddWorkout = () => {} } = props;\r\n\r\n    const onSubmit = (ev) => {\r\n        ev.preventDefault();\r\n        onAddWorkout(name);\r\n        setName('');\r\n    };\r\n\r\n    return <SingleInputForm\r\n        onSubmit={onSubmit}\r\n        onChange={ev => setName(ev.target.value)}\r\n        placeholder={t('workout_name')}\r\n        label={t('add_workout')}\r\n        value={name}\r\n    />;\r\n}","import { formatDistance } from 'date-fns';\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport { BiDumbbell, BiTrash } from 'react-icons/bi';\r\nimport { Link } from 'react-router-dom';\r\n\r\nimport pt from 'date-fns/locale/pt-BR';\r\nimport en from 'date-fns/locale/en-US';\r\nimport usePersistence from '../hooks/usePersistence';\r\nimport { useEffect, useState } from 'react';\r\n\r\nconst locales = { pt, en };\r\n\r\nexport default function WorkoutDisplay(props) {\r\n    const { name, onRemoveWorkout, id } = props;\r\n\r\n    const [lastRun, setLastRun] = useState(null);\r\n    const db = usePersistence();\r\n    const { t, language } = useTranslation();\r\n\r\n    useEffect(async () => {\r\n        db?.getLastLogEntry(id).then(lastEntry => {\r\n            if (lastEntry) {\r\n                setLastRun(lastEntry.date);\r\n            }\r\n        });\r\n    }, [db]);\r\n\r\n    const locale = locales[language];\r\n    const formatOptions = {};\r\n    if (locale) {\r\n        formatOptions.locale = locale;\r\n    }\r\n\r\n    return (\r\n        <Link to={{ pathname: '/newWorkout', search: `?id=${id}` }} className='p-2 border border-indigo-200 relative flex flex-wrap bg-indigo-50 rounded-xl'>\r\n            <button onClick={(ev) => {\r\n                onRemoveWorkout(id);\r\n                ev.preventDefault();\r\n            }} className='p-2 absolute top-0 right-0 text-indigo-400'><BiTrash /></button>\r\n            <h2 className='text-indigo-700 w-full text-md'><BiDumbbell className='-mt-1 inline text-lg' /> {name}</h2>\r\n            {lastRun && (\r\n                <p className='text-indigo-600 text-sm'>\r\n                    {t('last_run')}: {formatDistance(lastRun, new Date(), formatOptions)}\r\n                </p>\r\n            )}\r\n        </Link>\r\n    );\r\n}","import { useEffect, useState } from 'react';\r\nimport useTranslation from '../hooks/useTranslation';\r\nimport AddWorkout from './AddWorkout';\r\nimport WorkoutDisplay from './WorkoutDisplay';\r\n\r\nimport genHash from '../util/genHash';\r\nimport usePersistence from '../hooks/usePersistence';\r\n\r\nexport default function WorkoutList() {\r\n    const db = usePersistence();\r\n    const { t } = useTranslation();\r\n    const [workouts, setWorkouts] = useState([]);\r\n\r\n    useEffect(() => {\r\n        db?.getAllData('workouts').then(setWorkouts);\r\n    }, [db]);\r\n\r\n    const onAddWorkout = async (name) => {\r\n        const workout = {\r\n            id: genHash(), name, exercises: []\r\n        };\r\n\r\n        if (db) {\r\n            await db.saveWorkout(workout);\r\n        }\r\n\r\n        setWorkouts(workouts.concat([workout]));\r\n    };\r\n\r\n    const onRemoveWorkout = async (id) => {\r\n        const willRemove = window.confirm(t('confirm_delete'));\r\n        if (willRemove) {\r\n            if (db) {\r\n                await db.eraseWorkout(id);\r\n            }\r\n\r\n            setWorkouts(workouts.filter(w => w.id !== id));\r\n        }\r\n    };\r\n\r\n    return (\r\n        <div>\r\n            <h2 className='workout-name text-2xl text-indigo-800 font-semibold px-3 pt-4'>\r\n                {t('workouts_list')}\r\n            </h2>\r\n            {\r\n                workouts.length > 0 ? (\r\n                    <ul className='flex flex-col space-y-4 p-3'>\r\n                        {\r\n                            workouts.map((workout) =>\r\n                                <WorkoutDisplay\r\n                                    key={workout.id}\r\n                                    id={workout.id}\r\n                                    name={workout.name}\r\n                                    onRemoveWorkout={onRemoveWorkout}\r\n                                />)\r\n                        }\r\n                    </ul>\r\n                ) : (\r\n                    <p className='px-3 my-2 text-indigo-500'>{t('no_workout')}</p>\r\n                )\r\n            }\r\n            <AddWorkout onAddWorkout={onAddWorkout} />\r\n        </div>\r\n    );\r\n}\r\n","import { BrowserRouter as Router, Route, Switch } from 'react-router-dom';\r\n\r\nimport Workout from './components/Workout';\r\nimport WorkoutHistory from './components/WorkoutHistory';\r\nimport WorkoutList from './components/WorkoutList';\r\n\r\nimport { Container } from './ui';\r\n\r\nfunction App() {\r\n    const renderWorkout = (routeProps) => {\r\n        let id = new URLSearchParams(routeProps.location.search).get('id');\r\n\r\n        const createNew = routeProps.match.path === '/newWorkout';\r\n\r\n        if (routeProps.match.path === '/viewWorkout') {\r\n            id = Number(id); // Logs have numeric ids\r\n        }\r\n\r\n        return <Workout id={id} createNew={createNew} />;\r\n    };\r\n\r\n    return (\r\n        <Container>\r\n            <Router basename={process.env.PUBLIC_URL}>\r\n                <Switch>\r\n                    <Route exact path='/'>\r\n                        <WorkoutList />\r\n                        <WorkoutHistory />\r\n                    </Route>\r\n                    <Route path='/viewWorkout' render={renderWorkout} />\r\n                    <Route path='/newWorkout' render={renderWorkout} />\r\n                </Switch>\r\n            </Router>\r\n        </Container>\r\n    );\r\n}\r\n\r\nexport default App;\r\n","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\n\r\nReactDOM.render(\r\n  <React.StrictMode>\r\n    <App />\r\n  </React.StrictMode>,\r\n  document.getElementById('root')\r\n);"],"sourceRoot":""}